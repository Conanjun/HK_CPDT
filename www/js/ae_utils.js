// ------------------ ApplyEasy -------------------
// Convention:
//   public functions : use "ae_utils" prefix
//   private functions: use "_ae_utils" prefix
// Dependency:
//   gen_utils.js
// ------------------------------------------------------------
ae_utils_servlet_package_qdbaction = 'qdbAction'
ae_utils_servlet_package_aeaction = 'aeAction'
ae_utils_servlet_package_dispatcher = 'Dispatcher'
ae_utils_servlet_url = '../servlet/' + ae_utils_servlet_package_aeaction
wb_utils_servlet_url = '../servlet/' + ae_utils_servlet_package_qdbaction
ae_utils_disp_servlet_url = '../servlet/' + ae_utils_servlet_package_dispatcher
ae_utils_jsp_root_url = '../jsp/'
// ---------------------JSP-----------------------------------
ae_utils_jsp_home = 'home.jsp'
// ---------------------XSL------------------------------------
// ** ae_application.js
ae_utils_xsl_pending_items = 'ae_adm_pending_items.xsl'
ae_utils_xsl_pending_items_history = 'ae_adm_pending_items_history.xsl'
ae_utils_xsl_pending_applicants = 'ae_adm_pending_appn.xsl'
ae_utils_xsl_pending_applicants_history = 'ae_adm_pending_appn_history.xsl'
ae_utils_xsl_process_queue = 'ae_adm_process_queue.xsl'
ae_utils_xsl_usr_process = 'ae_adm_process_applicant.xsl'
ae_utils_xsl_apply_application_result = 'ae_lrn_apply_application_result.xsl'
ae_utils_xsl_apply_application_confirm = 'ae_lrn_apply_application_confirm.xsl'
ae_utils_xsl_apply_application = 'ae_lrn_apply_application.xsl'
ae_utils_xsl_view_application = 'ae_adm_view_application.xsl'
ae_utils_xsl_adm_app_ins_comment = 'ae_adm_app_ins_comment.xsl'
ae_utils_xsl_assign_new_applicants = 'ae_adm_assign_new_app.xsl'
ae_utils_xsl_adm_assign_lrn_itm_dtl = 'ae_adm_assign_lrn_itm_dtl.xsl'
ae_utils_xsl_adm_apply_lrn_application ='ae_adm_apply_lrn_application.xsl'
ae_utils_xsl_adm_apply_lrn_application_confirm = 'ae_adm_apply_lrn_application_confirm.xsl'
ae_utils_xsl_adm_apply_lrn_application_result = 'ae_adm_apply_lrn_application_result.xsl'
ae_utils_xsl_application_ins_grp ='ae_adm_application_ins_grp.xsl'
ae_utils_xsl_application_ins_usr ='ae_adm_application_ins_usr.xsl'

//** ae_utils.js
ae_utils_xsl_adm_cata_lst = 'catalog_lst.xsl'
ae_utils_xsl_adm_node_lst = 'itm_node_lst.xsl'
ae_utils_xsl_adm_itm_dtl = 'ae_adm_itm_dtl.xsl'
ae_utils_xsl_adm_cos_lst = 'ae_adm_cos_lst.xsl'

ae_utils_xsl_lrn_cata_lst = 'ae_lrn_cata_lst.xsl'
ae_utils_xsl_lrn_node_lst = 'ae_lrn_node_lst.xsl'
ae_utils_xsl_lrn_itm_dtl = 'ae_lrn_itm_dtl.xsl'
ae_utils_xsl_lrn_cos_lst = 'ae_lrn_cos_lst.xsl'
ae_utils_xsl_adm_orphan_itm_lst = 'ae_adm_orphan_itm_lst.xsl'


//** ae_cata_lst.js
ae_utils_xsl_adm_edit_cata = 'ae_adm_edit_cata.xsl'
ae_utils_xsl_adm_itm_lst = 'ae_adm_itm_lst.xsl'
ae_utils_xsl_assign_cata_usr = 'ae_adm_assign_cata_usr.xsl'
ae_utils_xsl_append_cata_usr = 'ae_adm_append_cata_usr.xsl'
ae_utils_xsl_add_cata_done = 'ae_adm_add_cata_done.xsl'

//** ae_node_lst.js

ae_utils_xsl_adm_edit_node = 'ae_adm_edit_node.xsl'
ae_utils_xsl_adm_pick_cata_lst = 'ae_adm_pick_cata_lst.xsl'
ae_utils_xsl_adm_pick_node_lst = 'ae_adm_pick_node_lst.xsl'

//  ** ae_itm_lst.js
ae_utils_xsl_adm_add_itm_prep = 'ae_adm_add_itm_prep.xsl'
ae_utils_xsl_adm_edit_itm  =  'ae_adm_edit_itm.xsl'
ae_utils_xsl_adm_pick_itm_cata_lst = 'ae_adm_pick_itm_cata_lst.xsl'
ae_utils_xsl_adm_pick_itm_orphan_itm_lst = 'ae_adm_pick_itm_orphan_itm_lst.xsl'
ae_utils_xsl_adm_pick_itm_node_lst = 'ae_adm_pick_itm_node_lst.xsl'
ae_utils_xsl_adm_chg_tpl = 'ae_adm_chg_tpl.xsl'
ae_utils_xsl_adm_frm_ins_itm = 'ae_adm_frm_ins_itm.xsl'
ae_utils_xsl_adm_pick_prog_itm_cata_lst = 'ae_adm_pick_prog_itm_cata_lst.xsl'
ae_utils_xsl_adm_pick_prog_itm_all_itm_lst = 'ae_adm_pick_prog_itm_all_itm_lst.xsl'
ae_utils_xsl_adm_pick_prog_itm_node_lst = 'ae_adm_pick_prog_itm_node_lst.xsl'
ae_utils_xsl_adm_pick_prog_itm_core = 'ae_adm_pick_prog_itm_core.xsl'
ae_utils_xsl_adm_edit_prog_itm = 'ae_adm_edit_prog_itm.xsl'
ae_utils_xsl_add_itm_done = 'ae_adm_add_item_done.xsl'
ae_utils_xsl_evn_lst = 'evn_lst.xsl'
ae_utils_xsl_itm_tna_dtl = 'ae_itm_tna_dtl.xsl'
ae_utils_xsl_itm_dtl_ass_node = 'ae_adm_itm_dtl_ass_node.xsl'
ae_utils_xsl_adm_itm_pick_cata_lst = 'ae_adm_itm_pick_cata_lst.xsl'
ae_utils_xsl_adm_itm_pick_node_lst = 'ae_adm_itm_pick_node_lst.xsl'

//**ae_itm_mote.js
ae_cos_mote_udp = 'ae_cos_mote_udp.xsl'
ae_cos_mote = 'ae_cos_mote.xsl'

// ** ae_search.js
ae_utils_xsl_adm_adv_seh = 'ae_adm_adv_search.xsl'
ae_utils_xsl_adm_adv_seh_result = 'ae_adm_simple_seh_result.xsl'
ae_utils_xsl_adm_simple_seh_result = 'ae_adm_simple_seh_result.xsl'
ae_utils_xsl_lrn_adv_seh = 'ae_lrn_adv_search.xsl'
ae_utils_xsl_lrn_adv_seh_result = 'ae_lrn_simple_seh_result.xsl'
ae_utils_xsl_lrn_simple_seh_result = 'ae_lrn_simple_seh_result.xsl'


// ** ae_item.js
ae_utils_get_item_acc = 'ae_adm_assign_item_acc.xsl'


// ** ae_payment.js
ae_utils_xsl_lrn_online_payment = 'ae_lrn_pay_online.xsl'
ae_utils_xsl_adm_view_usr_detail = 'ae_adm_view_usr_payt_det.xsl'
ae_utils_xsl_adm_payment_search = 'ae_adm_pay_search.xsl'
ae_utils_xsl_adm_payment_search_result = 'ae_adm_pay_search_result.xsl'
ae_utils_xsl_adm_online_payment = 'ae_adm_pay_online.xsl'
ae_utils_xsl_adm_online_payment_conf = 'ae_adm_pay_online_confirm.xsl'
ae_utils_xsl_adm_online_payment_failure = 'ae_adm_pay_online_fail.xsl'
ae_utils_xsl_adm_view_usr_trn_detail = 'ae_adm_view_usr_trn_det.xsl'
ae_utils_xsl_lrn_payment_transcation = 'ae_lrn_pay_trn.xsl'
ae_utils_xsl_lrn_payment = 'ae_lrn_pay.xsl'
ae_utils_xsl_lrn_pay_success = 'ae_lrn_pay_online_success.xsl'
ae_utils_xsl_lrn_pay_fail = 'ae_lrn_pay_online_fail1.xsl'
ae_utils_xsl_lrn_online_payment_content = 'ae_lrn_pay_online_content.xsl'
ae_utils_xsl_lrn_online_payment_header = 'ae_lrn_pay_online_header.xsl'
ae_utils_xsl_lrn_online_payment_done = 'ae_lrn_pay_online_done.xsl'
ae_utils_xsl_lrn_online_payment_fail = 'ae_lrn_pay_online_fail2.xsl'

// ** ae_utils.js ***
//*** home wizbank v3 home
//*** 2nd Home
ae_utils_xsl_adm_enrol = 'adm_enrol.xsl'
ae_utils_xsl_help = 'help.xsl'

//--------------------item detila option------------------------------
opt_default 		= 0;	// default, only template details (0)
opt_template_dtl 	= 1;	// template details (1)
opt_run_itm			= 2;	// run items (2)
opt_assign_node 	= 4;	// assigned nodes (4)
opt_ass_control 	= 8;	// access control rules (8)
opt_relate_res 		= 16;	// related resources (16)
opt_comp 			= 32;	// competence (32)
opt_parent_itm_dtl 	= 64;	// item details of the parent item (64)

//combination
dtl_opt_ae_adm_itm_dtl = opt_template_dtl + opt_assign_node + opt_ass_control + opt_relate_res + opt_comp + opt_parent_itm_dtl;
dtl_opt_cos_run_lst = opt_run_itm
dtl_opt_cos_assign_node = opt_assign_node

//---------------------------------------------------

//----------------------------------------------------

function ae_utils_invoke_servlet() {

	var path = ae_utils_servlet_url + '?'

	// temp
	path += 'env=wizb';
	for (i = 0; i < arguments.length; i = i + 2) {
		if (arguments[i] == 'stylesheet'){
			path += '&' + escape(arguments[i]) + '=' + arguments[i+1];
		}else{
			path += '&' + escape(arguments[i]) + '=' + escape(arguments[i+1]);
		}
	}
	return path;
}

function wb_utils_invoke_servlet() {

	var path = wb_utils_servlet_url + '?'

	// temp
	path += 'env=wizb';
	for (i = 0; i < arguments.length; i = i + 2) {
		if (arguments[i] == 'stylesheet'){
			path += '&' + escape(arguments[i]) + '=' + arguments[i+1];
		}else{
			path += '&' + escape(arguments[i]) + '=' + escape(arguments[i+1]);
		}
	}
	return path;
}

function ae_utils_set_cookie(token_nm,token_val){

	gen_set_cookie_token('wb', token_nm, token_val, '')
}

function ae_utils_get_cookie(token_nm){

	return gen_get_cookie_token('wb', token_nm)
}

function ae_utils_logout(lang){

		if(confirm(eval('ae_msg_' + lang + '_confirm')))
		{	url = wb_utils_invoke_servlet('cmd','logout')
		 	self.location.href= url
		}

}

function ae_utils_cancel() {

		window.location.href = ae_utils_get_cookie('url_prev')
}

function ae_utils_get_prev_url(url_id,nm_cookie) {

		ae_utils_set_cookie(nm_cookie + 'cnt', url_id);
		window.location.href = ae_utils_get_cookie(nm_cookie + 'url_' + url_id);
}

function ae_utils_init_css() {

	frm = arguments[0];

	if (document.all || document.getElementById!=null){
		n = frm.elements.length;
		for (i = 0; i < n; i++) {
			ele = frm.elements[i]

			for ( j = 1; j < arguments.length; j++ ) {
				if (ele.type == arguments[j])
					ele.className='aeGenInputFrm'
			}
		}
	}
}

function ae_utils_XmlEscape(str) {

	str = str.replace(/&/g, '&amp;')
	str = str.replace(/</g, '&lt;')
	str = str.replace(/>/g, '&gt;')
	return str
}
//---------------------------------------------------

//-- Administrator ----------------------------------
//Admin Home
function ae_utils_adm_home(){
	url = ae_utils_jsp_root_url + ae_utils_jsp_home
	window.parent.location.href =  url;
}

// ist home
function ae_utils_ist_home(){
	url = ae_utils_jsp_root_url + ae_utils_jsp_home
	window.parent.location.href =  url;
}

//Catalog List
function ae_utils_adm_cata_lst(){

	url = ae_utils_invoke_servlet('cmd','ae_get_cat_lst','stylesheet',ae_utils_xsl_adm_cata_lst)
	window.location.href = url;
}

//Catalog List Return URL
function ae_utils_adm_cata_lst_url(){

	url = ae_utils_invoke_servlet('cmd','ae_get_cat_lst','stylesheet',ae_utils_xsl_adm_cata_lst)
	return url;
}

//Node List
function ae_utils_adm_node_lst(tnd_id,list_type,order_by,sort_order){
	gen_set_cookie('url_failure',self.location.href)
	if ( list_type == null || list_type == 'item' ){
		if (order_by == null){
			if (sort_order == null){
				sort_order = 'asc'
			}
			order_by = 'itm_code'
		}
		else{
			if (sort_order == null){
				sort_order = 'asc'
			}

		}
	url = ae_utils_invoke_servlet('cmd','ae_get_tnd_cnt_lst','tnd_id',tnd_id,'list','item','orderby', order_by,'sortorder',sort_order,'url_failure','javascript:window.location.href=gen_get_cookie("url_failure")','stylesheet',ae_utils_xsl_adm_node_lst)

	}else
		url = ae_utils_invoke_servlet('cmd','ae_get_tnd_cnt_lst','tnd_id',tnd_id,'list',list_type,'url_failure','javascript:window.location.href=gen_get_cookie("url_failure")','stylesheet',ae_utils_xsl_adm_node_lst)
	window.parent.location.href = url;

}

//Node List Return
function ae_utils_adm_node_lst_url(tnd_id,list_type,order_by,sort_order){

	if ( list_type == null || list_type == 'item' ){
		if (order_by == null){
			if (sort_order == null){
				sort_order = 'asc'
			}
			order_by = 'itm_code'
		}
		else{
			if (sort_order == null){
				sort_order = 'asc'
			}

		}
	url = ae_utils_invoke_servlet('cmd','ae_get_tnd_cnt_lst','tnd_id',tnd_id,'list','item','orderby', order_by,'sortorder',sort_order,'stylesheet',ae_utils_xsl_adm_node_lst)

	}else
		url = ae_utils_invoke_servlet('cmd','ae_get_tnd_cnt_lst','tnd_id',tnd_id,'list',list_type,'stylesheet',ae_utils_xsl_adm_node_lst)
	return url;
}

function ae_utils_adm_show_node_lst(){

}

//Item Details
function ae_utils_adm_itm_dtl(itm_id,tnd_id,itm_nm,lang,itm_type){

	gen_set_cookie('url_failure',self.location.href)
	url = ae_utils_invoke_servlet(
		'cmd','ae_get_itm',
		'itm_id',itm_id,
		'tnd_id',tnd_id,
		'stylesheet',ae_utils_xsl_adm_itm_dtl,
		'url_failure','javascript:gen_get_cookie("url_failure")',
		'dtl_opt', dtl_opt_ae_adm_itm_dtl,
		'access_type','ROLE',
		'acc_id_lst', 'ECDN~NCDN~NIST'
	)
	//set cookie for navigation
	if (itm_type == null || itm_type == ''){
		itm_type = 'cos';
	}
	if (itm_type == 'cos'){
		var nm_token = '1'
		var nm_cookie = 'maintain_course_';
		ae_utils_set_cookie(nm_cookie + 'cnt', nm_token)
		ae_utils_set_cookie(nm_cookie + 'nm_' + nm_token, itm_nm)
		ae_utils_set_cookie(nm_cookie + 'url_' + nm_token, url)
	}else if (itm_type == 'run'){
		ae_utils_set_nav('maintain_course_',itm_nm,url);
	}
	window.location.href = url;
}

//Item Details Return URL
function ae_utils_adm_itm_dtl_url(itm_id,tnd_id){
	gen_set_cookie('url_failure',self.location.href)
	url = ae_utils_invoke_servlet(
		'cmd','ae_get_itm',
		'itm_id',itm_id,
		'tnd_id',tnd_id,
		'stylesheet', ae_utils_xsl_adm_itm_dtl,
		'url_failure','javascript:gen_get_cookie("url_failure")',
		'dtl_opt', dtl_opt_ae_adm_itm_dtl,
		'access_type','ROLE',
		'acc_id_lst', 'ECDN~NCDN~NIST'
	)
	return url;
}

function ae_utils_set_nav(nm_cookie,nm,url){

	var nm_token = '' + (parseInt(ae_utils_get_cookie(nm_cookie + 'cnt')) + 1);
	alert('ae_utils: ' + nm_token)
	ae_utils_set_cookie(nm_cookie + 'cnt', nm_token)
	ae_utils_set_cookie(nm_cookie + 'nm_' + nm_token, nm);
	ae_utils_set_cookie(nm_cookie + 'url_' + nm_token, url);
}

//orphan Item List
function ae_utils_adm_orphan_itm_lst(order_by,sort_order){
		if (order_by == null){
			if (sort_order == null){
				sort_order = 'asc'
			}
			order_by = 'itm_code'
		}
		else{
			if (sort_order == null){
				sort_order = 'asc'
			}

		}
	url = ae_utils_invoke_servlet('cmd','ae_get_orphan_itm','orderby',order_by,'sortorder',sort_order,'stylesheet',ae_utils_xsl_adm_orphan_itm_lst)
	window.location.href = url;
}
//More Item List at Padm_home
function ae_utils_adm_all_itm_lst(order_by,sort_order,all_ind,timestamp,page){
	if (page == null)
	page = 1;

	url = ae_utils_invoke_servlet('cmd','ae_lookup_itm','timestamp',timestamp,'orderby',order_by,'sortorder',sort_order,'all_ind',all_ind,'stylesheet',ae_utils_xsl_adm_itm_lst,'page',page)
	window.location.href = url;
}


//All Item List Return URL
function ae_utils_adm_all_itm_lst_url(){

	url = ae_utils_invoke_servlet('cmd','ae_get_all_itm','stylesheet',ae_utils_xsl_adm_orphan_itm_lst)
	return url;
}

//administrator 2nd level links

function ae_utils_adm_enrol_lst(){
	//url = wb_utils_invoke_servlet('cmd','get_prof','stylesheet',ae_utils_xsl_adm_enrol)

	if ( ae_utils_get_cookie('app_view') == 'applicant')
		url = ae_utils_invoke_servlet('cmd','ae_pending_appns','sort_by','name','order_by','ASC','stylesheet',ae_utils_xsl_pending_applicants)
	else
		url = ae_utils_invoke_servlet('cmd','ae_pending_items','sort_by','code','order_by','ASC','stylesheet',ae_utils_xsl_pending_items)
	window.parent.location.href =  url;


}

// payment

function ae_utils_adm_payment_lst(){

	url = ae_utils_invoke_servlet('cmd','ae_get_prof','stylesheet',ae_utils_xsl_adm_payment_search)
	window.location.href = url

}


//Utils at ae_utils.js

// function for generate xml code
function ae_gen_xml_code(frm){

	var i, n, ele, str
		str = ''
		n = frm.elements.length;

		str += '<details>'

		for (i = 0; i < n; i++) {
			ele = frm.elements[i]

			if ( eval('frm.' + ele.name + '_type') )
				field_type = eval('frm.' + ele.name + '_type.value')
			else
				field_type = ''

			/*if ( ele.id.indexOf('_') == -1 )
				field_type = ele.id
			else
				field_type = ele.id.substring(0,ele.id.lastIndexOf('_'))*/

			if (ele.name.indexOf('_') == -1)
				field_name = ele.name
			else
				field_name = ele.name.substring(0,ele.name.indexOf('_'))


			if ( field_type == 'checkbox' ||  field_type == 'radio' ) {
				str = str + '<' + field_name + '>'
				counter = 0;
				do {
					ele = frm.elements[i]
					if ( ele.name.indexOf('_type') == -1 && ele.name.indexOf('_id') == -1 ){
						if (ele.name.indexOf('_') == -1)
							field_name = ele.name
						else{
							field_name = ele.name.substring(0,ele.name.indexOf('_'))
						}
						counter ++;
						if ( ele.checked ){
							if ( field_type == 'radio' )
								field_id = counter
							else
								field_id = eval('frm.' + ele.name + '_id.value')
							str += '<' + field_name + ' id="' + field_id + '" value="' + ae_utils_XmlEscape(ele.value) +  '"/>'
						}
					}
					i ++;
				}while ( frm.elements[i].name.indexOf(field_name) != -1 );
				i --;
				str += '</' + field_name + '>'

			}else if ( field_type == 'ol' ||  field_type == 'ul') {
				str = str + '<' + field_name + '>'
				i++;
				do {
					ele = frm.elements[i]
					if ( ele.name.indexOf('_type') == -1 && ele.name.indexOf('_id') == -1 ){
						if (ele.name.indexOf('_') == -1)
							field_name = ele.name
						else{
							field_name = ele.name.substring(0,ele.name.indexOf('_'))
						}

						//	field_id = ele.id.substring(ele.id.indexOf('_')+1)
						field_id = eval('frm.' + ele.name + '_id.value')

						str += '<' + field_name + ' id="' + field_id + '" value="' + ae_utils_XmlEscape(ele.value) +  '"/>'
					}
					i ++;
				}while ( frm.elements[i].name.indexOf(field_name)  != -1);
				i --;
				str += '</' + field_name + '>'


			}else if ( field_type == 'text' || field_type ==  'email'  || field_type ==  'textarea' || field_type ==  'pos_int'  || field_type ==  'pos_amount' || field_type == 'hidden' ){
				str = str + '<' + field_name + '>' + ae_utils_XmlEscape(ele.value) + '</' + field_name + '>'

			}else if ( field_type ==  'select' ){
				str = str + '<' + ele.name + '>'
				str = str + '<' + ele.name + ' id="' + (ele.selectedIndex +1 ) + '" value="'  + ae_utils_XmlEscape(ele[ele.selectedIndex].text) + '"/>'
				str += '</' + ele.name + '>'


			}else if ( field_type == 'datetime'){
				if ( eval('frm.' + ele.name + '_yy') ){
					ele_name = ele.name
					if (  eval('frm.' + ele_name + '_yy.value.length') > 0 ){
						str = str + '<' + field_name + '>' + eval('frm.' + ele_name + '_yy.value') + '-' +  eval('frm.' + ele_name + '_mm.value') +  '-' +  eval('frm.' + ele_name + '_dd.value') + ' ' +  eval('frm.' + ele_name + '_hour.value') + ':' +  eval('frm.' + ele_name + '_min.value') + ':00.0</' + field_name + '>'
					}else
						str = str + '<' + field_name + '>' +   '</' + field_name + '>'
				}else{
					if ( ele.name.indexOf('type') == -1 && ele.name.indexOf('id') == -1 )
						str = str + '<' + field_name + '>' +  ele.value +  '</' + field_name + '>'
				}

			}
			else if ( field_type == 'date' ){
				if ( eval('frm.' + ele.name + '_yy') ){
					ele_name = ele.name
					if (eval('frm.' + ele_name + '_yy.value.length') > 0) {
						str = str + '<' + field_name + '>' + eval('frm.' + ele_name + '_yy.value') + '-' +  eval('frm.' + ele_name + '_mm.value') +  '-' +  eval('frm.' + ele_name + '_dd.value')
						if ( eval('frm.' + ele_name + '_time.value') != '' )
						str = str + ' ' + eval('frm.' + ele_name + '_time.value')
						str = str + '</' + field_name + '>'
					}else{
						str = str + '<' + field_name + '>' +   '</' + field_name + '>'
					}
				}else{
					if ( ele.name.indexOf('type') == -1 && ele.name.indexOf('id') == -1 )
						str = str + '<' + field_name + '>' +  ae_utils_XmlEscape(ele.value) +  '</' + field_name + '>'
				}
			}
		}

		str += '</details>'
		return str;
}


function ae_utils_XmlEscape(str) {
	str = str.replace(/&/g, '&amp;')
	str = str.replace(/</g, '&lt;')
	str = str.replace(/>/g, '&gt;')
	str = str.replace(/\"/g, '&quot;')
	return str
}


//-- Learner ----------------------------------
//Catalog List
function ae_utils_lrn_cata_lst(){

	url = ae_utils_invoke_servlet('cmd','ae_get_cat_lst','stylesheet',ae_utils_xsl_lrn_cata_lst)
	window.location.href = url;
}

//Node List
function ae_utils_lrn_node_lst(tnd_id){

	url = ae_utils_invoke_servlet('cmd','ae_get_tnd_cnt_lst','tnd_id',tnd_id,'stylesheet',ae_utils_xsl_lrn_node_lst)
	window.location.href = url;
}

//Item Details
function ae_utils_lrn_itm_dtl(itm_id,tnd_id){

	url = ae_utils_invoke_servlet('cmd','ae_get_itm','stylesheet',ae_utils_xsl_lrn_itm_dtl,'itm_id',itm_id,'tnd_id',tnd_id,'url_failure',self.location.href)
	window.location.href = url;
}
